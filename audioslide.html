<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>La prestamista del Bronx</title>

        <link rel="stylesheet" href="assets/css/reveal.css">

        <link rel="stylesheet" href="assets/css/audioslide.css">
        <link href="https://fonts.googleapis.com/css?family=Gentium+Basic|Open+Sans" rel="stylesheet">

        <script src='assets/js/jquery.min.js'></script>

    </head>
    <body>

        <!-- esta es la clase para el play y el pausa -->
        <!-- esta es la clase para el play y el pausa -->

        <!--<div class="controles" style="display: inline-block;">

            <ul>
                <li class="play"><a hef="#r">play</a></li>
                <li class="pausa"><a href="#">pausa</a></li>       
            </ul>

        </div> -->
           
        <div class="audio">
            <audio id="entrevista">
              <source src="assets/audios/prestamista-bronx.mp3" type="audio/mpeg">
            </audio>
            <div class="controles" id="controles" style="display:none">
                <a href="#" class="play" id="play">&#9654;</a><a href="#" class="pausa" id="pausa">&#9724;</a> 
            </div>
            <div id="button_wrapper">
                        <button>COMENZAR</button>
            </div>

        </div>

        <div class="reveal">
            <div class="slides">
                <section class="slide-aligned-left" data-background-image="assets/images/foto8.jpg">
                    <h1> Doña Bella: <br> prestamista del Bronx</h1>
                    <p class="intro">La dominicana que vive de prestar dinero <br> a los latinos sin acceso a la banca.</p>
                </section>
                        
                
<!--
            <div class="button_wrapper">

                <button>Comenzar</button>

            </div>
-->
            <!--
        <h6>Primary Buttons</h6>
        <div class="button_wrapper">
        <button>Default</button>
        <button class="usa-button-active">Active</button>
        <button class="usa-button-hover">Hover</button>
        </div>

            <div class="button_wrapper"><a href="#" align="center" class="navigate-next" id="comenzar">Comenzar</a></div -->

                <section data-background-image="assets/images/foto1.JPG">
                    
                 <p> I am going to Leo’s house and on my way there I’m going to dance in my car. I have to go to Leo’s to pick up my money, and then I’m going to the beauty salon to pick up some more money and get my hair done.</p>  
                </section> 

                 <section data-background-image="assets/images/foto2.JPG">
                     
                 <p>I have to go to Leo’s to pick up my money, and then I’m going to the beauty salon to pick up some more money and get my hair done. </p> 
                 
                 <p>This is Ivelisse García, a 48-year old Dominican woman who lives in the Bronx, in New York.</p>   
                 </section> 
            
                <section data-background-image="assets/images/foto10.JPG"></section> 

                 <section data-background-image="assets/images/foto11.JPG"></section> 

                 <section data-background-image="assets/images/foto13.JPG"></section> 

                 <section data-background-video="assets/videos/video_presta1.mov" data-background-video-loop data-background-video-muted class="background-content">
                 </section>

                 <section class="slide-aligned-left"> 
                 <h2>“Prestar dinero cae en la ilegalidad cuando se cobran más de 16% de interés”.</h2> 
                 </section>

                  <section data-background-image="assets/images/fotosentada.JPG"></section> 

                  <section data-background-image="assets/images/fotocelular.JPG"></section> 

                  <section data-background-image="assets/images/foto5.JPG"></section> 

                  <section data-background-image="assets/images/foto9.JPG"></section> 
        
                  <section data-background-image="assets/images/foto18.JPG"></section>

                  <section data-background-image="assets/images/foto14.JPG"></section>


                  <section data-background-image="assets/images/fotogente2.JPG"></section>

                  <section data-background-image="assets/images/header.jpg.JPG"></section>

                  <section data-background-image="assets/images/foto19.JPG">
                 </section>   


                 <section data-background-image="assets/images/foto15.JPG">
                 </section>   

                 <section data-background-image="assets/images/foto4.JPG">
                </section>   


                 <section data-background-image="assets/images/foto15.JPG">
                </section> 


                <section data-background-video="assets/videos/video_presta2.mov" data-background-video-loop data-background-video-muted class="background-content">
                 </section> 



          

                <!--
                 <section data-background-image="assets/images/foto3.JPG">
                </section> FOTO DE BRONX GENERAL FALTA AQUI-->




                <section>
                   <a href="http://twitter.com/coco_gp" target="_blank" class="socialmedia">
                   <img src="assets/images/twitter.png"></a>
                   <a href="https://www.instagram.com/coco_gp/" target="_blank" class="socialmedia">   
                   <img src="assets/images/instagram_app.png"></a>
           
                    <p>Producción y edición: Mónica Cordero, Constanza Gallardo y Alma
                    Sacasa</p>
                    <p>Entrevistada: Ivelisse García</p>
                    <p>Tecnología usada: HTML, CSS y JavaScrip</p>
                    <p>Este es un proyecto de la clase Craft 2 Periodismo y Redacción
                    Avanzada, Programa Bilingüe de la Maestría de Periodismo de CUNY
                    Graduate School of Journalism.</p>
                    <p>Instructores: Luis Trelles y Miguel Paz. Cristina Maldonado
                    (Research), Davo Galavotti (Coach de Interactivo).</p>
                    <p>Producido en Nueva York </p>
                </section>
                

            </div>
        </div>

        <script src="assets/js/head.min.js"></script>
        <script src="assets/js/reveal.js"></script>
        
        <script>

            $(document).ready(function() {

                // Array para guardar el tiempo en el momento que cambiamos cada slide.
                // Cada valor en el array esta expresado en segundos acumulados PONER NUMERITOS.
                var tiempoTransicion = [0,7,16,20,28,32,36,41,49,58,68,75,85,89,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250];

                // Posición del array tiempoTransicion
                var marcaActual = 0; 
                // Selecciono el objeto de audio.
                var entrevista = $('#entrevista');
                // Extraigo la duración.
                var duracion = entrevista.prop('duration');
                // Extraigo la posición actual del audio.
                var posicion = entrevista.prop('currentTime');

                // Inicio haciendo click en el botón comenzar, para darle "Play" al audio. El slide se ejecuta vía Reveal.js, class="navigate-next"
                $('#button_wrapper').on('click', function() {

                    marcaActual=0;
                    entrevista.prop('currentTime',0);
                    entrevista.trigger('play');

                    // cambiar css de .controles 
                });

                $('#play').on('click', function() {

                        entrevista.trigger('play');

                });

                $('#pausa').on('click', function() {


                    entrevista.trigger('pause');
                });

                // Listener o evento que detecta si hubo un cambio en slide.
                Reveal.addEventListener( 'slidechanged', function(event, setTime) {

                    // Si accidentalmente me cambio de slide sin usar el botón comenzar, entonces ejecuto el audio.

                    // Caso contrario, pongo el audio en pausa y lo vuelvo a cero.

                    if (Reveal.getState().indexh === 0) {
                        entrevista.trigger('pause');
                        entrevista.prop('currentTime',0);
                    } else {
                        entrevista.trigger('play');
                    }

                });

                // Función para ejecutar siguiende slide.
                function cambiarSlide() {
                    Reveal.next(); 
                    if (marcaActual==0)
                    
                    {document.getElementById("controles").style.display = "block";
                    document.getElementById("button_wrapper").style.display = "none";

                    }



                    marcaActual += 1;
                }

                // Listener o evento que extrae el tiempo actual del audio.
                // Sin función actualmente.
                entrevista.on('timeupdate', function() {  

                    console.log(Math.round(entrevista.prop('currentTime')))


                    posicion = entrevista.prop('currentTime');
                    if (posicion > 0 && posicion >= tiempoTransicion[marcaActual]) {
                        cambiarSlide();
                    }
                });



            });
            // More info https://github.com/hakimel/reveal.js#configuration
                Reveal.initialize({
                history: false,
                controls: false,
                center: true,
                transition: 'fade',
                progress: false,
                width: "100%",
                height: "100%"
            });
        </script>
    </body>
</html>
